name: local docker runner (unit tests)

on:
  push:
    branches: [temp]

jobs:
  test:
    runs-on: self-hosted
    steps:
      # 1️⃣ Pobranie kodu z repo
      - name: Checkout code
        uses: actions/checkout@v4

      # 2️⃣ Sprawdzenie systemowej Javy 11
      - name: Check Java version
        run: java -version

      # 3️⃣ Budowanie projektu i uruchomienie testów jednostkowych
      - name: Build and run unit tests
        run: mvn clean test

      # 4️⃣ (Opcjonalnie) Wyświetlenie raportów testów
      - name: Show test reports
        run: cat target/surefire-reports/*.txt || echo "No reports found"
