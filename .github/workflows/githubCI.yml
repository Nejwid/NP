name: local docker runner

on:
  push:
    branches: [temp]

jobs:
  test:
    runs-on: self-hosted
    steps:
      # 1️⃣ Pobranie kodu z repo
      - name: Checkout code
        uses: actions/checkout@v4

      # 2️⃣ Ustawienie Javy 11
      - name: Set up Java
        uses: actions/setup-java@v3
        with:
          distribution: temurin
          java-version: 11

      # 3️⃣ Budowanie projektu i uruchomienie testów jednostkowych
      - name: Build and run unit tests
        run: mvn clean test

      # 4️⃣ (Opcjonalnie) Wyświetlenie raportów testów
      - name: Show test reports
        run: cat target/surefire-reports/*.txt || echo "No reports found"
